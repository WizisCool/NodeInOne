(function(){"use strict";var i={6357:function(i,e,n){var t=n(3751),o=n(641);const l={id:"app"};function r(i,e,n,t,r,a){const s=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",l,[(0,o.bF)(s)])}var a={name:"App"},s=n(6262);const c=(0,s.A)(a,[["render",r]]);var u=c,d=n(5220);const b={class:"login"},p={href:"/auth/github"};function k(i,e,n,t,l,r){const a=(0,o.g2)("el-button");return(0,o.uX)(),(0,o.CE)("div",b,[e[1]||(e[1]=(0,o.Lk)("h1",null,"NodeInOne Login",-1)),(0,o.Lk)("a",p,[(0,o.bF)(a,{type:"primary"},{default:(0,o.k6)((()=>e[0]||(e[0]=[(0,o.eW)("Login with GitHub")]))),_:1})])])}var f={name:"UserLoginView"};const h=(0,s.A)(f,[["render",k],["__scopeId","data-v-aec641d0"]]);var m=h,S=n(33);const y={class:"subscription-container"},w={class:"header"};function g(i,e,n,t,l,r){const a=(0,o.g2)("el-button"),s=(0,o.g2)("el-table-column"),c=(0,o.g2)("el-input"),u=(0,o.g2)("el-switch"),d=(0,o.g2)("el-table"),b=(0,o.g2)("el-card"),p=(0,o.g2)("el-form-item"),k=(0,o.g2)("el-form"),f=(0,o.g2)("el-dialog");return(0,o.uX)(),(0,o.CE)("div",y,[e[14]||(e[14]=(0,o.Lk)("h1",null,"订阅管理系统",-1)),(0,o.bF)(b,{class:"subscription-card"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",w,[e[7]||(e[7]=(0,o.Lk)("h2",null,"订阅列表",-1)),(0,o.bF)(a,{type:"primary",circle:"",icon:"el-icon-plus",onClick:r.openAddSubscriptionModal},{default:(0,o.k6)((()=>e[6]||(e[6]=[(0,o.eW)("新增")]))),_:1},8,["onClick"])]),(0,o.bF)(d,{data:l.subscriptions,style:{width:"100%"}},{default:(0,o.k6)((()=>[(0,o.bF)(s,{prop:"name",label:"名称"}),(0,o.bF)(s,{label:"链接数量",width:"120"},{default:(0,o.k6)((i=>[(0,o.eW)((0,S.v_)(i.row.links.length),1)])),_:1}),(0,o.bF)(s,{label:"订阅地址"},{default:(0,o.k6)((i=>[(0,o.bF)(c,{value:r.getSubscriptionLink(i.row),readonly:""},null,8,["value"]),(0,o.bF)(a,{type:"primary",icon:"el-icon-document-copy",circle:"",onClick:e=>r.copySubscriptionLink(i.row)},null,8,["onClick"])])),_:1}),(0,o.bF)(s,{label:"启用",width:"100"},{default:(0,o.k6)((i=>[(0,o.bF)(u,{modelValue:i.row.enabled,"onUpdate:modelValue":e=>i.row.enabled=e,onChange:e=>r.toggleSubscriptionStatus(i.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),(0,o.bF)(s,{label:"操作",width:"200"},{default:(0,o.k6)((i=>[(0,o.bF)(a,{type:"primary",icon:"el-icon-edit",circle:"",onClick:e=>r.editSubscription(i.row)},null,8,["onClick"]),(0,o.bF)(a,{type:"danger",icon:"el-icon-delete",circle:"",onClick:e=>r.deleteSubscription(i.row.id)},null,8,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,o.bF)(f,{title:"新建订阅",modelValue:l.addSubscriptionModalVisible,"onUpdate:modelValue":e[2]||(e[2]=i=>l.addSubscriptionModalVisible=i)},{footer:(0,o.k6)((()=>[(0,o.bF)(a,{onClick:e[1]||(e[1]=i=>l.addSubscriptionModalVisible=!1)},{default:(0,o.k6)((()=>e[9]||(e[9]=[(0,o.eW)("取消")]))),_:1}),(0,o.bF)(a,{type:"primary",onClick:r.onAddSubscription},{default:(0,o.k6)((()=>e[10]||(e[10]=[(0,o.eW)("确认")]))),_:1},8,["onClick"])])),default:(0,o.k6)((()=>[(0,o.bF)(k,{model:l.newSubscription,"label-width":"100px"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{label:"订阅名称"},{default:(0,o.k6)((()=>[(0,o.bF)(c,{modelValue:l.newSubscription.name,"onUpdate:modelValue":e[0]||(e[0]=i=>l.newSubscription.name=i)},null,8,["modelValue"])])),_:1}),(0,o.bF)(p,{label:"订阅链接"},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.newSubscription.links,((i,e)=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"link-input"},[(0,o.bF)(c,{modelValue:l.newSubscription.links[e],"onUpdate:modelValue":i=>l.newSubscription.links[e]=i},null,8,["modelValue","onUpdate:modelValue"]),(0,o.bF)(a,{type:"danger",icon:"el-icon-delete",circle:"",onClick:i=>r.removeNewLink(e)},null,8,["onClick"])])))),128)),(0,o.bF)(a,{type:"primary",icon:"el-icon-plus",onClick:r.addNewLink},{default:(0,o.k6)((()=>e[8]||(e[8]=[(0,o.eW)("添加链接")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,o.bF)(f,{title:"编辑订阅",modelValue:l.editSubscriptionModalVisible,"onUpdate:modelValue":e[5]||(e[5]=i=>l.editSubscriptionModalVisible=i)},{footer:(0,o.k6)((()=>[(0,o.bF)(a,{onClick:e[4]||(e[4]=i=>l.editSubscriptionModalVisible=!1)},{default:(0,o.k6)((()=>e[12]||(e[12]=[(0,o.eW)("取消")]))),_:1}),(0,o.bF)(a,{type:"primary",onClick:r.onEditSubscription},{default:(0,o.k6)((()=>e[13]||(e[13]=[(0,o.eW)("保存")]))),_:1},8,["onClick"])])),default:(0,o.k6)((()=>[(0,o.bF)(k,{model:l.editSubscriptionData,"label-width":"100px"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{label:"订阅名称"},{default:(0,o.k6)((()=>[(0,o.bF)(c,{modelValue:l.editSubscriptionData.name,"onUpdate:modelValue":e[3]||(e[3]=i=>l.editSubscriptionData.name=i)},null,8,["modelValue"])])),_:1}),(0,o.bF)(p,{label:"订阅链接"},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.editSubscriptionData.links,((i,e)=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"link-input"},[(0,o.bF)(c,{modelValue:l.editSubscriptionData.links[e],"onUpdate:modelValue":i=>l.editSubscriptionData.links[e]=i},null,8,["modelValue","onUpdate:modelValue"]),(0,o.bF)(a,{type:"danger",icon:"el-icon-delete",circle:"",onClick:i=>r.removeEditLink(e)},null,8,["onClick"])])))),128)),(0,o.bF)(a,{type:"primary",icon:"el-icon-plus",onClick:r.addEditLink},{default:(0,o.k6)((()=>e[11]||(e[11]=[(0,o.eW)("添加链接")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),e[15]||(e[15]=(0,o.Lk)("footer",null," NodeInOne ©2025 Created by 董俊泽 ",-1))])}n(4114),n(8992),n(4520);var v=n(4335),F=n(163),V={name:"UserDashboardView",data(){return{subscriptions:[],newSubscription:{name:"",links:[""]},addSubscriptionModalVisible:!1,editSubscriptionModalVisible:!1,editSubscriptionData:{id:null,name:"",links:[]}}},async created(){await this.fetchSubscriptions()},methods:{async fetchSubscriptions(){try{const i=await v.A.get("/api/subscriptions");this.subscriptions=i.data}catch(i){F.nk.error("加载订阅失败，请稍后重试"),console.error(i)}},async onAddSubscription(){try{const i=await v.A.post("/api/subscriptions",this.newSubscription);this.subscriptions.push(i.data),this.newSubscription={name:"",links:[""]},this.addSubscriptionModalVisible=!1,F.nk.success("订阅添加成功")}catch(i){F.nk.error("添加订阅失败，请稍后重试"),console.error(i)}},async deleteSubscription(i){try{await v.A.delete(`/api/subscriptions/${i}`),this.subscriptions=this.subscriptions.filter((e=>e.id!==i)),F.nk.success("订阅删除成功")}catch(e){F.nk.error("删除订阅失败，请稍后重试"),console.error(e)}},async toggleSubscriptionStatus(i){try{await v.A.put(`/api/subscriptions/${i.id}/status`,{enabled:i.enabled}),F.nk.success("订阅状态已更新")}catch(e){i.enabled=!i.enabled,F.nk.error("更新订阅状态失败，请稍后重试"),console.error(e)}},async editSubscription(i){this.editSubscriptionData={...i,links:[...i.links]},this.editSubscriptionModalVisible=!0},async onEditSubscription(){try{await v.A.put(`/api/subscriptions/${this.editSubscriptionData.id}`,this.editSubscriptionData);const i=this.subscriptions.findIndex((i=>i.id===this.editSubscriptionData.id));-1!==i&&(this.subscriptions[i]={...this.editSubscriptionData}),this.editSubscriptionModalVisible=!1,F.nk.success("订阅保存成功")}catch(i){F.nk.error("保存订阅失败，请稍后重试"),console.error(i)}},getSubscriptionLink(i){return`${window.location.origin}/subscriptions/${i.id}`},copySubscriptionLink(i){navigator.clipboard.writeText(this.getSubscriptionLink(i)).then((()=>{F.nk.success("订阅链接已复制")})).catch((()=>{F.nk.error("复制订阅链接失败")}))},addNewLink(){this.newSubscription.links.push("")},removeNewLink(i){this.newSubscription.links.splice(i,1)},addEditLink(){this.editSubscriptionData.links.push("")},removeEditLink(i){this.editSubscriptionData.links.splice(i,1)},openAddSubscriptionModal(){this.addSubscriptionModalVisible=!0}}};const C=(0,s.A)(V,[["render",g],["__scopeId","data-v-6dcff4d1"]]);var _=C;const L=[{path:"/",component:m},{path:"/dashboard",component:_}],E=(0,d.aE)({history:(0,d.LA)(),routes:L});var M=E,A=n(7146);n(4188);const D=(0,t.Ef)(u);D.use(M),D.use(A.A),D.mount("#app")}},e={};function n(t){var o=e[t];if(void 0!==o)return o.exports;var l=e[t]={exports:{}};return i[t].call(l.exports,l,l.exports,n),l.exports}n.m=i,function(){var i=[];n.O=function(e,t,o,l){if(!t){var r=1/0;for(u=0;u<i.length;u++){t=i[u][0],o=i[u][1],l=i[u][2];for(var a=!0,s=0;s<t.length;s++)(!1&l||r>=l)&&Object.keys(n.O).every((function(i){return n.O[i](t[s])}))?t.splice(s--,1):(a=!1,l<r&&(r=l));if(a){i.splice(u--,1);var c=o();void 0!==c&&(e=c)}}return e}l=l||0;for(var u=i.length;u>0&&i[u-1][2]>l;u--)i[u]=i[u-1];i[u]=[t,o,l]}}(),function(){n.d=function(i,e){for(var t in e)n.o(e,t)&&!n.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:e[t]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(i){if("object"===typeof window)return window}}()}(),function(){n.o=function(i,e){return Object.prototype.hasOwnProperty.call(i,e)}}(),function(){n.r=function(i){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})}}(),function(){var i={524:0};n.O.j=function(e){return 0===i[e]};var e=function(e,t){var o,l,r=t[0],a=t[1],s=t[2],c=0;if(r.some((function(e){return 0!==i[e]}))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(s)var u=s(n)}for(e&&e(t);c<r.length;c++)l=r[c],n.o(i,l)&&i[l]&&i[l][0](),i[l]=0;return n.O(u)},t=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))}();var t=n.O(void 0,[504],(function(){return n(6357)}));t=n.O(t)})();
//# sourceMappingURL=app.f8022823.js.map